<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>LegalAI Pro â€” Ultimate Edition</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-0: #02000a;
      --bg-1: #0a0018;
      --text-primary: #ffffff;
      --text-muted: rgba(220, 220, 255, 0.75);
      --accent-cyan: #00f5ff;
      --accent-magenta: #ff00c1;
      --accent-lime: #a3ff00;
      --danger: #ff4757;
      --warning: #ffa502;
      --glass-border: rgba(255, 255, 255, 0.12);
      --card-shadow-cyan: 0 0 30px rgba(0, 245, 255, 0.35);
      --card-shadow-magenta: 0 0 30px rgba(255, 0, 193, 0.35);
      --glass-blur: 18px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-0);
      color: var(--text-muted);
      line-height: 1.6;
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background:
        radial-gradient(600px circle at 10% 20%, rgba(255, 0, 193, 0.2), transparent 80%),
        radial-gradient(800px circle at 90% 80%, rgba(0, 245, 255, 0.18), transparent 80%);
      animation: backgroundPan 25s linear infinite;
      z-index: -1;
    }

    /* Keyframe Animations */
    @keyframes backgroundPan {
      0% { background-position: 0% 50%, 0% 50%; }
      50% { background-position: 100% 50%, 100% 50%; }
      100% { background-position: 0% 50%, 0% 50%; }
    }

    @keyframes fadeIn { 
      from { opacity: 0; transform: translateY(20px) scale(0.98); filter: blur(5px); } 
      to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0px); } 
    }
    
    @keyframes fadeOut { 
      from { opacity: 1; transform: translateY(0); } 
      to { opacity: 0; transform: translateY(-20px); filter: blur(5px); } 
    }

    @keyframes glare {
      0% { transform: translateX(-100%) skewX(-30deg); }
      100% { transform: translateX(200%) skewX(-30deg); }
    }
    
    @keyframes scanline {
        0% { transform: translateY(-100%); }
        100% { transform: translateY(100%); }
    }

    /* General Layout & SVG Icons */
    .app-container { max-width: 1100px; margin: 0 auto; padding: 32px; min-height: 100vh; }
    .icon { width: 1.2em; height: 1.2em; display: inline-block; vertical-align: -0.2em; }

    /* Staggered Animations */
    .stagger-in > * {
        opacity: 0;
        transform: translateY(20px);
        animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    /* Header */
    .header {
      padding: 20px 30px;
      margin-bottom: 40px;
      background: rgba(10, 0, 24, 0.5);
      backdrop-filter: blur(var(--glass-blur));
      border-radius: 20px;
      border: 1px solid var(--glass-border);
      box-shadow: var(--card-shadow-cyan), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
    }
    .header::before {
        content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
        background: linear-gradient(90deg, transparent, var(--accent-cyan), transparent);
    }
    .header-content {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .header-logo {
      flex-shrink: 0;
      color: var(--accent-cyan);
      filter: drop-shadow(0 0 8px var(--accent-cyan));
    }
    .header-logo .icon { width: 48px; height: 48px; }

    h1 {
      font-size: 2.25rem;
      font-weight: 800;
      color: var(--text-primary);
      text-shadow: 0 0 12px var(--accent-cyan);
      margin-bottom: 2px;
    }
    .header p { color: var(--text-muted); font-size: 1.1rem; font-weight: 500; }

    /* Main Content Area */
    .main-content {
      background: rgba(10, 0, 24, 0.4);
      backdrop-filter: blur(var(--glass-blur));
      border-radius: 24px;
      padding: 40px;
      box-shadow: var(--card-shadow-magenta), inset 0 1px 1px rgba(255, 255, 255, 0.05);
      border: 1px solid var(--glass-border);
    }

    /* Button Styles */
    .neon-btn, .ghost-btn {
      border: none; padding: 16px 32px;
      font-size: 1.1rem; font-weight: 700;
      border-radius: 14px; cursor: pointer;
      transition: all 0.3s ease;
      position: relative; overflow: hidden;
      display: inline-flex; align-items: center; gap: 8px; justify-content: center;
    }
    .neon-btn {
      color: var(--bg-0);
      background: linear-gradient(90deg, var(--accent-cyan), var(--accent-magenta));
      box-shadow: 0 0 20px rgba(255, 0, 193, 0.4);
    }
    .ghost-btn {
      background: transparent;
      border: 1px solid var(--glass-border);
      color: var(--text-muted);
    }
    .neon-btn:hover {
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 0 35px rgba(0, 245, 255, 0.6);
    }
    .ghost-btn:hover { background: rgba(255, 255, 255, 0.1); border-color: var(--accent-cyan); color: var(--text-primary); }
    
    /* Shimmer/Glare Effect on Hover */
    .neon-btn::after, .feature-card::after, .risk-item::after, .obligation-item::after {
        content: ''; position: absolute; top: 0; left: 0;
        width: 50%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
        transform: translateX(-150%) skewX(-30deg);
        transition: transform 0.6s ease;
    }
    .neon-btn:hover::after, .feature-card:hover::after, .risk-item:hover::after, .obligation-item:hover::after {
        transform: translateX(250%) skewX(-30deg);
    }

    /* Upload Section */
    .upload-section {
      text-align: center;
      margin-bottom: 48px;
      padding: 40px;
      border-radius: 20px;
      transition: all 0.4s ease;
      background: rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
      border: 1px solid var(--glass-border);
    }
    .upload-section.dragover, .upload-section:hover {
      transform: scale(1.02);
      box-shadow: var(--card-shadow-cyan);
      border-color: var(--accent-cyan);
    }
    .upload-section .scanner {
        content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
        background: var(--accent-cyan);
        box-shadow: 0 0 10px var(--accent-cyan);
        animation: scanline 2s ease-in-out infinite alternate;
        opacity: 0; transition: opacity 0.3s;
    }
    .upload-section.dragover .scanner { opacity: 1; }

    .upload-icon {
      font-size: 4rem; margin-bottom: 24px;
      color: var(--accent-cyan); filter: drop-shadow(0 0 10px var(--accent-cyan));
    }
    .upload-section h2 {
      font-size: 1.75rem; font-weight: 700; color: var(--text-primary);
      text-shadow: 0 0 8px var(--accent-cyan); margin-bottom: 12px;
    }
    .upload-section p { font-size: 1.1rem; margin: 16px 0; font-weight: 500; }
    .hint {
      margin-top: 24px; padding: 16px 24px; background: rgba(163, 255, 0, 0.08);
      border-radius: 12px; color: var(--text-muted); font-size: 0.95rem; font-weight: 500;
      border-left: 4px solid var(--accent-lime);
    }

    /* Processing */
    .processing { display: none; text-align: center; margin: 60px 0; padding: 40px; }
    .processing-animation {
      position: relative; width: 80px; height: 80px;
      margin: 0 auto 24px;
    }
    .spinner-ring {
      position: absolute; width: 100%; height: 100%; border: 3px solid transparent;
      border-radius: 50%; animation: spin 2s linear infinite;
    }
    .spinner-ring:nth-child(1) { border-top-color: var(--accent-cyan); animation-duration: 2s; }
    .spinner-ring:nth-child(2) { border-right-color: var(--accent-magenta); animation-duration: 3s; animation-direction: reverse; }
    .spinner-ring:nth-child(3) { border-bottom-color: var(--accent-lime); animation-duration: 1.5s; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .processing h3 {
      font-size: 1.5rem; font-weight: 700; color: var(--text-primary);
      margin-bottom: 12px; text-shadow: 0 0 10px var(--accent-cyan);
    }

    /* Results */
    .results { display: none; margin-top: 20px; }
    .result-section {
      margin-bottom: 32px; padding: 32px; border-radius: 20px;
      border: 1px solid var(--glass-border);
      background: linear-gradient(160deg, rgba(0, 245, 255, 0.05), rgba(255, 0, 193, 0.03));
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }
    .result-section h3 {
      font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px;
      display: flex; align-items: center; gap: 12px;
      text-shadow: 0 0 8px var(--accent-cyan);
    }
    .result-section h3 .icon { color: var(--accent-cyan); }

    .risk-item, .obligation-item {
      background: var(--bg-1); padding: 20px 24px; margin: 16px 0; border-radius: 16px;
      box-shadow: inset 0 1px 1px rgba(255,255,255,0.05); border: 1px solid var(--glass-border);
      font-weight: 500; transition: all 0.3s ease;
      position: relative; overflow: hidden;
    }
    .risk-item:hover, .obligation-item:hover {
      transform: translateY(-2px) scale(1.01);
      box-shadow: var(--card-shadow-magenta), inset 0 1px 1px rgba(255,255,255,0.05);
      border-color: var(--accent-magenta);
    }
    .risk-item { border-left: 4px solid var(--danger); }
    .obligation-item { border-left: 4px solid var(--warning); }
    
    .item-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
    .item-header strong { font-size: 1.1rem; }
    .risk-item strong { color: var(--danger); }
    .obligation-item strong { color: var(--warning); }
    .item-header .tag { padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 600; margin-left: auto; }
    .risk-item .tag { background: rgba(255, 71, 87, 0.1); color: var(--danger); }
    .obligation-item .tag { background: rgba(255, 165, 2, 0.1); color: var(--warning); }

    /* Download Section */
    .download-section { text-align: center; margin: 48px 0; padding: 32px; border-radius: 20px; border: 1px solid var(--glass-border); }
    .action-buttons { display: flex; justify-content: center; gap: 16px; flex-wrap: wrap; margin-top: 16px; }

    /* Chatbot */
    .chatbot-section {
      background: linear-gradient(180deg, rgba(0, 245, 255, 0.02), rgba(255, 0, 193, 0.01));
      border-radius: 20px; padding: 32px; margin-top: 32px; border: 1px solid var(--glass-border);
    }
    .chat-messages {
      max-height: 400px; overflow-y: auto; margin-bottom: 24px; padding: 12px;
      background: rgba(0,0,0,0.2); border-radius: 16px; border: 1px solid var(--glass-border);
    }
    .message {
      margin-bottom: 16px; padding: 16px 20px; border-radius: 18px; max-width: 85%;
      animation: fadeIn 0.5s forwards; opacity: 0; font-weight: 500; line-height: 1.6;
    }
    .ai-message { background: rgba(255, 0, 193, 0.08); color: var(--text-muted); border: 1px solid rgba(255, 255, 255, 0.06); }
    .user-message {
      background: linear-gradient(90deg, var(--accent-cyan), var(--accent-magenta)); color: var(--bg-0);
      margin-left: auto; text-align: left; width: fit-content; box-shadow: 0 0 12px rgba(0, 245, 255, 0.4);
    }
    .chat-input-container { display: flex; gap: 16px; align-items: flex-end; }
    .chat-input {
      flex: 1; padding: 14px 20px; border-radius: 16px; border: 1px solid var(--glass-border);
      background: var(--bg-1); color: var(--text-primary); font-size: 1rem; font-weight: 500;
      transition: all 0.3s ease; font-family: 'Inter', sans-serif; resize: none; overflow-y: hidden;
      line-height: 1.5; max-height: 150px;
    }
    .chat-input:focus {
      outline: none; border-color: var(--accent-cyan);
      box-shadow: 0 0 0 3px rgba(0, 245, 255, 0.2);
    }
    .send-btn {
      background: linear-gradient(135deg, var(--accent-lime), #86c423); color: var(--bg-0);
      border: none; padding: 14px; border-radius: 14px; cursor: pointer; font-weight: 700;
      transition: all 0.3s ease; min-width: 48px; height: 48px;
    }
    .send-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(163, 255, 0, 0.25); }

    /* Feature Cards */
    .features-section { margin-top: 60px; }
    .features-section h2 {
      font-size: 2rem; font-weight: 700; text-align: center; margin-bottom: 40px;
      color: var(--text-primary); text-shadow: 0 0 15px var(--accent-magenta);
    }
    .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; }
    .feature-card {
      background: linear-gradient(180deg, rgba(0, 245, 255, 0.03), rgba(255, 0, 193, 0.02));
      padding: 32px 28px; border-radius: 20px; text-align: center;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2); border: 1px solid var(--glass-border);
      transition: all 0.4s ease; position: relative; overflow: hidden;
    }
    .feature-card:hover { transform: translateY(-8px); box-shadow: var(--card-shadow-magenta); border-color: var(--accent-magenta); }
    .feature-icon {
      font-size: 3rem; margin-bottom: 20px;
      color: var(--accent-cyan); filter: drop-shadow(0 0 10px var(--accent-cyan));
    }
    .feature-card h3 { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); margin-bottom: 12px; }

    /* Typing Indicator */
    .typing-indicator { display: flex; align-items: flex-end; gap: 5px; height: 20px; }
    .typing-bar {
      width: 5px; height: 5px; background: var(--text-muted);
      border-radius: 2px; animation: typing-pulse 1.2s infinite ease-in-out;
    }
    .typing-bar:nth-child(2) { animation-delay: 0.15s; }
    .typing-bar:nth-child(3) { animation-delay: 0.3s; }
    @keyframes typing-pulse {
      0%, 100% { height: 5px; opacity: 0.5; }
      50% { height: 20px; opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .app-container { padding: 16px; }
      .header { flex-direction: column; gap: 20px; text-align: center; padding: 24px; }
      h1 { font-size: 1.8rem; }
      .main-content { padding: 32px 20px; }
      .feature-grid { grid-template-columns: 1fr; }
    }
    
    .animate-on-scroll { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease, transform 0.6s ease; }
    .animate-on-scroll.in-view { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body>

  <svg style="display:none">
    <symbol id="icon-scale" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 3h18"></path><path d="M12 3v18"></path><path d="M4 12H2"></path><path d="M8 12H6"></path><path d="M21 12h-2"></path><path d="M17 12h-2"></path><path d="M12 21l-3-3"></path><path d="M12 21l3-3"></path><path d="M12 3L9 6"></path><path d="M12 3l3 6"></path>
    </symbol>
    <symbol id="icon-file" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline>
    </symbol>
    <symbol id="icon-summary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
    </symbol>
    <symbol id="icon-risk" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line>
    </symbol>
    <symbol id="icon-obligations" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
    </symbol>
    <symbol id="icon-download" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" x2="12" y1="15" y2="3"></line>
    </symbol>
     <symbol id="icon-upload" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" x2="12" y1="3" y2="15"></line>
    </symbol>
    <symbol id="icon-reset" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M21 21v-5h-5"></path>
    </symbol>
    <symbol id="icon-chat" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </symbol>
    <symbol id="icon-send" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
    </symbol>
    <symbol id="icon-ai" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5.5 4.5A2.5 2.5 0 0 1 8 2h8a2.5 2.5 0 0 1 2.5 2.5v15A2.5 2.5 0 0 1 16 22H8a2.5 2.5 0 0 1-2.5-2.5Z"></path><path d="M8 12h8"></path>
    </symbol>
    <symbol id="icon-report" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"></path><path d="M14 2v4a2 2 0 0 0 2 2h4"></path><path d="M10 9H8"></path><path d="M16 13H8"></path><path d="M16 17H8"></path>
    </symbol>
    <symbol id="icon-qa" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><path d="M12 17h.01"></path>
    </symbol>
    <symbol id="icon-security" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
    </symbol>
  </svg>


  <div id="app">
    <div class="app-container fade-in">
      <header class="header stagger-in">
        <div class="header-logo">
            <svg class="icon"><use xlink:href="#icon-scale"></use></svg>
        </div>
        <div class="header-text">
          <h1>LegalAI Pro</h1>
          <p>Advanced Document Intelligence Matrix</p>
        </div>
      </header>

      <main class="main-content">
        <section id="uploadSection" class="upload-section" aria-label="Document upload area">
          <div class="scanner"></div>
          <div class="upload-icon">
            <svg class="icon" style="width: 64px; height: 64px;"><use xlink:href="#icon-file"></use></svg>
          </div>
          <h2>Upload Document</h2>
          <p>Drag & Drop your encrypted files or browse local databanks</p>
          <input id="fileInput" type="file" accept=".pdf,.doc,.docx,.txt" style="display:none" />
          <button id="chooseBtn" class="neon-btn">
            <svg class="icon"><use xlink:href="#icon-upload"></use></svg>
            Choose Document
          </button>
          <div class="hint">
            <strong>Pro Tip:</strong> Upload a 'lease' file for Housing Protocol analysis, or any other for standard Employment Contract simulation.
          </div>
        </section>

        <section id="processing" class="processing" aria-hidden="true">
          <div class="processing-animation">
            <div class="spinner-ring"></div><div class="spinner-ring"></div><div class="spinner-ring"></div>
          </div>
          <h3>Analyzing Datastream...</h3>
          <p>Our neural network is processing your document, decrypting key clauses, and identifying potential risks...</p>
        </section>

        <section id="results" class="results" aria-live="polite">
          <div class="stagger-in">
            <div id="summarySection" class="result-section animate-on-scroll">
              <h3><svg class="icon"><use xlink:href="#icon-summary"></use></svg> Executive Summary</h3>
              <div id="summaryContent"></div>
            </div>

            <div id="risksSection" class="result-section risks-section animate-on-scroll">
              <h3><svg class="icon"><use xlink:href="#icon-risk"></use></svg> Risk Analysis & Red Flags</h3>
              <div id="risksContent"></div>
            </div>

            <div id="obligationsSection" class="result-section obligations-section animate-on-scroll">
              <h3><svg class="icon"><use xlink:href="#icon-obligations"></use></svg> Key Obligations & Requirements</h3>
              <div id="obligationsContent"></div>
            </div>

            <div class="download-section animate-on-scroll">
              <h3><svg class="icon"><use xlink:href="#icon-download"></use></svg> Export Analysis & Actions</h3>
              <p>Download a comprehensive report or start over with a new document.</p>
              <div class="action-buttons">
                <button id="downloadBtn" class="neon-btn">
                    <svg class="icon"><use xlink:href="#icon-download"></use></svg> Download Encrypted Report
                </button>
                <button id="resetBtn" class="ghost-btn">
                    <svg class="icon"><use xlink:href="#icon-reset"></use></svg> Upload Another Document
                </button>
              </div>
            </div>

            <div class="chatbot-section animate-on-scroll">
              <h3><svg class="icon"><use xlink:href="#icon-chat"></use></svg> AI Legal Assistant</h3>
              <div id="chatMessages" class="chat-messages" aria-live="polite">
                <div class="message ai-message">
                  Analysis complete. I am ready to clarify any specific clauses, explain legal terminology, or answer questions about your obligations. How may I assist?
                </div>
              </div>
              <div class="chat-input-container">
                <textarea id="chatInput" class="chat-input" placeholder="Query the AI... (Shift+Enter for new line)" rows="1"></textarea>
                <button id="sendBtn" class="send-btn">
                    <svg class="icon"><use xlink:href="#icon-send"></use></svg>
                </button>
              </div>
            </div>
          </div>
        </section>
        
        <section class="features-section animate-on-scroll">
          <h2>Why Choose LegalAI Pro?</h2>
          <div class="feature-grid stagger-in" id="featureGrid">
            <div class="feature-card">
              <div class="feature-icon"><svg class="icon"><use xlink:href="#icon-ai"></use></svg></div>
              <h3>Advanced AI Analysis</h3>
              <p>State-of-the-art natural language processing specifically trained on legal documents to provide accurate, contextual analysis.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon"><svg class="icon"><use xlink:href="#icon-report"></use></svg></div>
              <h3>Smart Reports & Risk Detection</h3>
              <p>Automatically identifies risks and generates detailed PDF reports with executive summaries and actionable recommendations.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon"><svg class="icon"><use xlink:href="#icon-qa"></use></svg></div>
              <h3>Interactive Q&A</h3>
              <p>Get instant answers to complex legal questions with our AI assistant trained on thousands of legal documents.</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon"><svg class="icon"><use xlink:href="#icon-security"></use></svg></div>
              <h3>Enterprise Security</h3>
              <p>Military-grade encryption and a zero-retention policy ensures your sensitive legal documents remain completely confidential.</p>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    class LegalAIApp {
      constructor() {
        this.initializeElements();
        this.initializeEventListeners();
        this.initializeAnimations();
        this.lastAnalysisType = 'employment';
      }

      initializeElements() {
        this.app = document.getElementById('app');
        this.fileInput = document.getElementById('fileInput');
        this.chooseBtn = document.getElementById('chooseBtn');
        this.uploadSection = document.getElementById('uploadSection');
        this.processing = document.getElementById('processing');
        this.results = document.getElementById('results');
        this.summaryContent = document.getElementById('summaryContent');
        this.risksContent = document.getElementById('risksContent');
        this.obligationsContent = document.getElementById('obligationsContent');
        this.downloadBtn = document.getElementById('downloadBtn');
        this.chatMessages = document.getElementById('chatMessages');
        this.chatInput = document.getElementById('chatInput');
        this.sendBtn = document.getElementById('sendBtn');
        this.resetBtn = document.getElementById('resetBtn');
      }

      initializeEventListeners() {
        this.chooseBtn.addEventListener('click', () => this.fileInput.click());
        this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
        this.setupDragAndDrop();
        this.sendBtn.addEventListener('click', () => this.handleChatMessage());
        this.chatInput.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault(); 
            this.handleChatMessage();
          }
        });
        this.chatInput.addEventListener('input', () => this.autoResizeChatInput());
        this.downloadBtn.addEventListener('click', () => this.generatePDFReport());
        this.resetBtn.addEventListener('click', () => this.resetApp());
      }

      autoResizeChatInput() {
        this.chatInput.style.height = 'auto';
        this.chatInput.style.height = `${this.chatInput.scrollHeight}px`;
      }

      resetApp() {
        this.results.classList.add('fade-out');
        setTimeout(() => {
          this.results.style.display = 'none';
          this.processing.style.display = 'none';
          this.uploadSection.style.display = 'block';
          this.summaryContent.innerHTML = '';
          this.risksContent.innerHTML = '';
          this.obligationsContent.innerHTML = '';
          this.chatMessages.innerHTML = `
            <div class="message ai-message">
              Analysis complete. I am ready to clarify any specific clauses, explain legal terminology, or answer questions about your obligations. How may I assist?
            </div>`;
          this.fileInput.value = null;
          document.querySelectorAll('.animate-on-scroll').forEach(el => {
            el.classList.remove('in-view');
          });
          this.results.classList.remove('fade-out');
          this.uploadSection.classList.remove('fade-out');
          this.uploadSection.classList.add('fade-in');
        }, 600);
      }

      initializeAnimations() {
        const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('in-view');
              const staggerContainer = entry.target.querySelector('.stagger-in');
              if (staggerContainer) {
                  Array.from(staggerContainer.children).forEach((child, index) => {
                      child.style.animationDelay = `${index * 120}ms`;
                  });
              }
            }
          });
        }, observerOptions);
        document.querySelectorAll('.animate-on-scroll, .stagger-in').forEach(el => observer.observe(el));
      }

      setupDragAndDrop() {
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            this.uploadSection.addEventListener(eventName, e => {
                e.preventDefault();
                e.stopPropagation();
            });
        });
        ['dragenter', 'dragover'].forEach(eventName => {
            this.uploadSection.addEventListener(eventName, () => this.uploadSection.classList.add('dragover'));
        });
        ['dragleave', 'drop'].forEach(eventName => {
            this.uploadSection.addEventListener(eventName, () => this.uploadSection.classList.remove('dragover'));
        });
        this.uploadSection.addEventListener('drop', (e) => {
          const files = e.dataTransfer.files;
          if (files.length > 0) this.handleFileSelect({ target: { files } });
        });
      }

      getAnalysisData() {
        return {
          employment: {
            summary: `This employment agreement establishes a comprehensive framework for the professional relationship between the employer and employee. The contract includes detailed provisions regarding compensation, benefits, performance expectations, and termination procedures. Key components include a competitive salary structure with performance-based bonuses, comprehensive benefits package, and clearly defined roles and responsibilities.
            <br><br><strong>Contract Duration:</strong> Indefinite term w/ 90-day probationary period. <strong>Compensation:</strong> Base salary + quarterly bonuses. <strong>Benefits:</strong> Health insurance, retirement, and PTO.`,
            risks: [ { title: "Restrictive Non-Compete Clause", description: "The agreement contains an 18-month non-compete restriction that could significantly limit your future employment opportunities within the industry. This clause may be overly broad and potentially unenforceable.", severity: "High" }, { title: "Broad Confidentiality Agreement", description: "Provisions extend beyond trade secrets to include general business practices, restricting professional networking and future business activities.", severity: "Medium" }, { title: "Intellectual Property Assignment", description: "All work-related intellectual property, including inventions created outside of work hours, automatically transfers to the company. This could affect personal projects.", severity: "High" } ],
            obligations: [ { title: "Performance Standards", description: "Maintain satisfactory performance as measured by quarterly reviews and established KPIs. Failure to meet standards may result in performance improvement plans or termination.", priority: "Critical" }, { title: "Confidentiality Requirements", description: "Protect all proprietary information, client data, and trade secrets both during employment and after termination.", priority: "Critical" }, { title: "Compliance Obligations", description: "Adhere to all company policies, industry regulations, and legal requirements applicable to your position and the organization's operations.", priority: "Important" } ]
          },
          lease: {
            summary: `This residential lease agreement establishes the terms and conditions for rental of the specified property. The document outlines rental obligations, property maintenance responsibilities, and tenant rights, including provisions for rent payments, security deposits, and termination.
            <br><br><strong>Lease Term:</strong> 12 months with auto-renewal. <strong>Monthly Rent:</strong> Due on the 1st, late fees after 5 days. <strong>Security Deposit:</strong> 1.5 months' rent, refundable subject to property condition.`,
            risks: [ { title: "Automatic Rent Escalation (5%)", description: "The lease includes an automatic 5% annual rent increase clause that compounds yearly, potentially making the property unaffordable over time.", severity: "High" }, { title: "Limited Security Deposit Return", description: "The agreement allows deductions from the security deposit for 'normal wear and tear,' which exceeds standard legal protections in most jurisdictions.", severity: "Medium" }, { title: "Early Termination Penalties", description: "Breaking the lease early results in forfeiture of security deposit plus additional penalties equivalent to two months' rent.", severity: "Medium" } ],
            obligations: [ { title: "Timely Rent Payment", description: "Pay monthly rent by the 1st of each month. Late payments after the 5-day grace period incur fees and may result in eviction proceedings.", priority: "Critical" }, { title: "Property Maintenance", description: "Maintain the property in good condition, report maintenance issues promptly, and allow reasonable access for inspections and repairs.", priority: "Important" }, { title: "Insurance Requirements", description: "Maintain renter's insurance with minimum coverage amounts as specified in the lease agreement and provide proof of coverage annually.", priority: "Critical" } ]
          }
        };
      }

      handleFileSelect(event) {
        const files = event.target.files;
        if (files && files.length > 0) this.processDocument(files[0]);
      }

      processDocument(file) {
        if (!this.validateFile(file)) return;
        this.uploadSection.classList.add('fade-out');
        setTimeout(() => {
            this.uploadSection.style.display = 'none';
            this.processing.style.display = 'block';
            this.processing.classList.add('fade-in');
        }, 600);
        setTimeout(() => {
          this.processing.classList.remove('fade-in');
          this.processing.classList.add('fade-out');
          setTimeout(() => {
              this.processing.style.display = 'none';
              this.results.style.display = 'block';
              this.displayAnalysis(file.name);
              this.animateResults();
          }, 600);
        }, 2500 + Math.random() * 1000);
      }

      validateFile(file) {
        const maxSize = 25 * 1024 * 1024;
        const allowedTypes = ['.pdf', '.doc', '.docx', '.txt'];
        const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
        if (file.size > maxSize) {
          alert('File size exceeds 25MB limit.'); return false;
        }
        if (!allowedTypes.includes(fileExtension)) {
          alert('Unsupported file type. Please upload PDF, Word, or text files.'); return false;
        }
        return true;
      }

      displayAnalysis(filename) {
        const analysisType = filename.toLowerCase().includes('lease') ? 'lease' : 'employment';
        this.lastAnalysisType = analysisType;
        const data = this.getAnalysisData()[analysisType];
        this.summaryContent.innerHTML = `<div style="font-size: 1.1rem; line-height: 1.7;">${data.summary}</div>`;
        this.risksContent.innerHTML = data.risks.map(risk => `
          <div class="risk-item"><div class="item-header"><strong>${risk.title}</strong><span class="tag">${risk.severity}</span></div><p>${risk.description}</p></div>`).join('');
        this.obligationsContent.innerHTML = data.obligations.map(obligation => `
          <div class="obligation-item"><div class="item-header"><strong>${obligation.title}</strong><span class="tag">${obligation.priority}</span></div><p>${obligation.description}</p></div>`).join('');
      }

      animateResults() {
        const resultsContainer = this.results.querySelector('.stagger-in');
        Array.from(resultsContainer.children).forEach((child, index) => {
            child.style.animationDelay = `${index * 150}ms`;
        });
      }

      handleChatMessage() {
        const message = this.chatInput.value.trim();
        if (!message) return;
        this.addChatMessage(message, 'user');
        this.chatInput.value = '';
        this.autoResizeChatInput(); 
        this.showTypingIndicator();
        setTimeout(() => {
          this.removeTypingIndicator();
          const response = this.generateAIResponse(message);
          this.simulateTypingResponse(response);
        }, 1000 + Math.random() * 1500);
      }

      addChatMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message`;
        messageDiv.textContent = text;
        this.chatMessages.appendChild(messageDiv);
        this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
      }

      showTypingIndicator() {
        this.removeTypingIndicator();
        const indicator = document.createElement('div');
        indicator.id = 'typingIndicator';
        indicator.className = 'message ai-message';
        indicator.innerHTML = `<div class="typing-indicator"><div class="typing-bar"></div><div class="typing-bar"></div><div class="typing-bar"></div></div>`;
        this.chatMessages.appendChild(indicator);
        this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
      }

      removeTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        if (indicator) indicator.remove();
      }

      simulateTypingResponse(text) {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message ai-message';
        this.chatMessages.appendChild(messageDiv);
        let index = 0;
        const typingSpeed = 20 + Math.random() * 15;
        const typeWriter = () => {
          if (index < text.length) {
            messageDiv.textContent += text.charAt(index);
            index++;
            this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            setTimeout(typeWriter, typingSpeed);
          }
        };
        typeWriter();
      }

      generateAIResponse(question) {
        const q = question.toLowerCase();
        if (q.includes('terminate') || q.includes('quit')) return "Regarding termination: You can resign by providing 30 days written notice per Section 5.2. The non-compete clause remains in effect for 18 months post-termination.";
        if (q.includes('salary') || q.includes('pay')) return "Compensation includes a base salary (Sec 3.1) and performance-based quarterly bonuses (Sec 3.2). Annual salary reviews are in January.";
        if (q.includes('vacation') || q.includes('pto')) return "You receive 15 days of paid vacation in year one, increasing to 20 after two years, plus 10 sick days and federal holidays.";
        if (q.includes('benefit') || q.includes('insurance')) return "Benefits include health insurance (80% employer-paid), dental/vision, a 401(k) with 4% company match, and life insurance.";
        if (q.includes('non-compete')) return "The non-compete clause restricts work with direct competitors for 18 months within a 50-mile radius. I advise consulting an attorney on its local enforceability.";
        if (q.includes('confidential')) return "The confidentiality agreement covers all proprietary information, client data, and trade secrets, and this obligation is indefinite.";
        return "I can clarify any aspect of your document. Try asking about 'salary', 'benefits', 'termination', or 'confidentiality'.";
      }

      generatePDFReport() {
        if (!window.jspdf || !window.jspdf.jsPDF) { alert('PDF generation is currently unavailable.'); return; }
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({ unit: 'pt', format: 'a4' });
        const pageWidth = doc.internal.pageSize.getWidth();
        const pageHeight = doc.internal.pageSize.getHeight();
        const margin = 50;
        
        doc.setFillColor(5, 0, 16);
        doc.rect(0, 0, pageWidth, pageHeight, 'F');
        doc.setTextColor(255, 255, 255);
        doc.setFont('helvetica', 'bold');
        doc.setFontSize(24);
        doc.text('LegalAI Pro - Document Analysis Report', margin, 50);
        
        doc.setFontSize(10);
        doc.setFont('helvetica', 'normal');
        doc.setTextColor(220, 220, 255);
        const generatedDate = `Generated on: ${new Date().toLocaleDateString()}`;
        doc.text(generatedDate, margin, 70);

        let yPosition = 110;

        const addSection = (title, content) => {
            if (yPosition > pageHeight - 150) {
                doc.addPage();
                doc.setFillColor(5, 0, 16);
                doc.rect(0, 0, pageWidth, pageHeight, 'F');
                yPosition = margin;
            }
            doc.setFontSize(16);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(0, 245, 255);
            doc.text(title, margin, yPosition);
            yPosition += 25;
            doc.setFontSize(11);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(220, 220, 255);
            const lines = doc.splitTextToSize(content.trim().replace(/<br>/g, '\n'), pageWidth - 2 * margin);
            doc.text(lines, margin, yPosition);
            yPosition += lines.length * 14 + 20;
        };

        addSection('EXECUTIVE SUMMARY', this.summaryContent.innerText);
        addSection('RISK ANALYSIS & RED FLAGS', this.risksContent.innerText);
        addSection('KEY OBLIGATIONS & REQUIREMENTS', this.obligationsContent.innerText);

        const filename = `LegalAI_Pro_${this.lastAnalysisType}_Analysis.pdf`;
        doc.save(filename);
      }
    }
    
    document.addEventListener('DOMContentLoaded', () => new LegalAIApp());
  </script>
</body>
</html>